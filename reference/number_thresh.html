<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Format and top- or bottom-code numbers based on a threshold — number_thresh • stylehaven</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Format and top- or bottom-code numbers based on a threshold — number_thresh"><meta name="description" content="This is a set of helper functions for formatting numbers where you
also need to top-code or bottom-code values above or below some threshold (or both).
Additional arguments help with generating plain English text or escaped HTML
characters for printing in tables."><meta property="og:description" content="This is a set of helper functions for formatting numbers where you
also need to top-code or bottom-code values above or below some threshold (or both).
Additional arguments help with generating plain English text or escaped HTML
characters for printing in tables."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stylehaven</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dcws_example_plots.html">Plot examples from the DCWS launch</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CT-Data-Haven/stylehaven/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Format and top- or bottom-code numbers based on a threshold</h1>
      <small class="dont-index">Source: <a href="https://github.com/CT-Data-Haven/stylehaven/blob/main/R/number_thresh.R" class="external-link"><code>R/number_thresh.R</code></a></small>
      <div class="d-none name"><code>number_thresh.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is a set of helper functions for formatting numbers where you
also need to top-code or bottom-code values above or below some threshold (or both).
Additional arguments help with generating plain English text or escaped HTML
characters for printing in tables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">number_thresh</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">thresh</span>,</span>
<span>  less_than <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  accuracy <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  txt <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  html <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">percent_thresh</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">thresh</span>,</span>
<span>  less_than <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  accuracy <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  txt <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  html <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dollar_thresh</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">thresh</span>,</span>
<span>  less_than <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  accuracy <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  txt <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  html <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Numeric vector</p></dd>


<dt id="arg-thresh">thresh<a class="anchor" aria-label="anchor" href="#arg-thresh"></a></dt>
<dd><p>Numeric, the threshold above/below which numbers will be capped.</p></dd>


<dt id="arg-less-than">less_than<a class="anchor" aria-label="anchor" href="#arg-less-than"></a></dt>
<dd><p>Boolean: if <code>TRUE</code>, values <em>less than</em> the threshold will be
lumped together. Otherwise, values <em>greater than</em> the threshold will be
lumped. Default: TRUE</p></dd>


<dt id="arg-accuracy">accuracy<a class="anchor" aria-label="anchor" href="#arg-accuracy"></a></dt>
<dd><p>Number: accuracy of formatted numbers, passed to <code><a href="https://scales.r-lib.org/reference/label_number.html" class="external-link">scales::label_number</a></code>
and related functions. Defaults to 1, meaning no decimal places are returned.</p></dd>


<dt id="arg-txt">txt<a class="anchor" aria-label="anchor" href="#arg-txt"></a></dt>
<dd><p>Boolean: if <code>TRUE</code>, plain English is used (e.g. "less than") instead of
symbols (e.g. "&lt;"). For <code>percent_thresh</code>, this also means using " percent" instead
of "%". Default: FALSE</p></dd>


<dt id="arg-html">html<a class="anchor" aria-label="anchor" href="#arg-html"></a></dt>
<dd><p>Boolean: if <code>TRUE</code>, HTML-appropriate symbols are used (e.g. <code>&amp;lt;</code>)
instead of more readable ones (e.g. "&lt;"). Has no effect if <code>txt = TRUE</code>. Default: FALSE
function</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="https://scales.r-lib.org/reference/label_number.html" class="external-link">scales::label_number</a></code></p><dl><dt><code>scale</code></dt>
<dd><p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p></dd>

    <dt><code>prefix</code></dt>
<dd><p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code>-$1</code> and <code>($1)</code>.</p></dd>

    <dt><code>suffix</code></dt>
<dd><p>Additional text to display after the number.</p></dd>

    <dt><code>big.mark</code></dt>
<dd><p>Character used between every 3 digits to separate thousands.</p></dd>

    <dt><code>decimal.mark</code></dt>
<dd><p>The character to be used to indicate the numeric
decimal point.</p></dd>

    <dt><code>style_positive</code></dt>
<dd><p>A string that determines the style of positive numbers:</p><ul><li><p><code>"none"</code> (the default): no change, e.g. <code>1</code>.</p></li>
<li><p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.</p></li>
<li><p><code>"space"</code>: preceded by a Unicode "figure space", i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.</p></li>
</ul></dd>

    <dt><code>style_negative</code></dt>
<dd><p>A string that determines the style of negative numbers:</p><ul><li><p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.</p></li>
<li><p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.</p></li>
<li><p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.</p></li>
</ul></dd>

    <dt><code>scale_cut</code></dt>
<dd><p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:</p><ul><li><p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.</p></li>
<li><p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.</p></li>
<li><p><code>cut_si(unit)</code>: uses standard SI units.</p></li>
</ul><p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code>[0, 100)</code> will not be rescaled, absolute values in the range <code>[100, 1000)</code>
will be divided by 100 and given the suffix "a", and absolute values in
the range <code>[1000, Inf)</code> will be divided by 1000 and given the suffix "b".
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p></dd>

    <dt><code>trim</code></dt>
<dd><p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="https://rdrr.io/r/base/format.html" class="external-link">base::format()</a></code>).</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector of the same length as <code>x</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.92</span>, <span class="fl">0.991</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">percent_thresh</span><span class="op">(</span><span class="va">rate</span>, thresh <span class="op">=</span> <span class="fl">0.99</span>, less_than <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "90%"  "95%"  "92%"  "&gt;99%"</span>
<span class="r-in"><span><span class="fu">percent_thresh</span><span class="op">(</span><span class="va">rate</span>, thresh <span class="op">=</span> <span class="fl">0.99</span>, less_than <span class="op">=</span> <span class="cn">FALSE</span>, txt <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "90 percent"           "95 percent"           "92 percent"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "more than 99 percent"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

